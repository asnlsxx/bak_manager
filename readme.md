# å¤‡ä»½ç®¡ç†å™¨ (BackupManager)

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ–‡ä»¶å¤‡ä»½å·¥å…·ï¼Œæ”¯æŒå›¾å½¢ç•Œé¢å’Œå‘½ä»¤è¡Œæ“ä½œï¼Œæä¾›æ–‡ä»¶è¿‡æ»¤ã€å‹ç¼©åŠ å¯†ç­‰å¤šç§åŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

### åŸºç¡€åŠŸèƒ½
- æ–‡ä»¶å’Œç›®å½•çš„å¤‡ä»½ä¸è¿˜åŸ
- å¤‡ä»½æ•°æ®å®Œæ•´æ€§éªŒè¯
- æ”¯æŒå‘½ä»¤è¡Œå’Œå›¾å½¢ç•Œé¢æ“ä½œ

### é«˜çº§ç‰¹æ€§
- æ–‡ä»¶è¿‡æ»¤åŠŸèƒ½
  - æ”¯æŒæŒ‰æ–‡ä»¶åã€è·¯å¾„è¿‡æ»¤ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
  - æ”¯æŒæŒ‰æ–‡ä»¶ç±»å‹è¿‡æ»¤ï¼ˆæ™®é€šæ–‡ä»¶ã€ç¬¦å·é“¾æ¥ã€ç®¡é“æ–‡ä»¶ï¼‰
  - æ”¯æŒæŒ‰æ–‡ä»¶å¤§å°è¿‡æ»¤
  - æ”¯æŒæŒ‰è®¿é—®/ä¿®æ”¹/åˆ›å»ºæ—¶é—´è¿‡æ»¤
- æ•°æ®å¤„ç†
  - LZWå‹ç¼©ç®—æ³•æ”¯æŒ
  - AESåŠ å¯†ä¿æŠ¤
  - æ–‡ä»¶å…ƒæ•°æ®ä¿å­˜å’Œè¿˜åŸ
- ç‰¹æ®Šæ–‡ä»¶æ”¯æŒ
  - è½¯é“¾æ¥æ–‡ä»¶
  - ç¡¬é“¾æ¥æ–‡ä»¶
  - ç®¡é“æ–‡ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- C++20
- CMake 3.10+
- OpenSSL
- OpenGL
- GLFW3
- ImGui
- Catch2 (ç”¨äºæµ‹è¯•)

### å®‰è£…æ–¹å¼

è¯·æ³¨æ„æ‹‰å–æœ¬é¡¹ç›®åï¼Œè¿˜éœ€è¦æ‹‰å–å­æ¨¡å—
```bash
git submodule update --init --recursive
```

#### ä½¿ç”¨ Docker
æˆ‘ä»¬æä¾›äº† Dockerfile æ¥ç®€åŒ–ç¯å¢ƒé…ç½®ï¼š

```bash
# æ„å»ºé•œåƒï¼Œç¼–è¯‘å¹¶å®‰è£…è½¯ä»¶
docker build -t backupmanager:latest .

# è¿è¡Œå¼€å‘ç¯å¢ƒ
docker run -it --rm --name backupmanager backupmanager /bin/bash

# æˆåŠŸè¿è¡Œ
BackupManager -h
```

### è¿è¡Œæµ‹è¯•
```bash
cd build
ctest --output-on-failure
```

## ğŸ’» ä½¿ç”¨è¯´æ˜

### å‘½ä»¤æ ¼å¼
```bash
BackupManager [æ“ä½œ] [é€‰é¡¹] <å‚æ•°>

æ“ä½œ:
  -b, --backup            å¤‡ä»½æ¨¡å¼
  -r, --restore          è¿˜åŸæ¨¡å¼
  -l, --verify           éªŒè¯æ¨¡å¼
  -g, --gui              å¯åŠ¨å›¾å½¢ç•Œé¢

å¿…é€‰å‚æ•°:
  -i, --input <è·¯å¾„>     è¾“å…¥è·¯å¾„/å¤‡ä»½æ–‡ä»¶
  -o, --output <è·¯å¾„>    è¾“å‡ºè·¯å¾„ï¼ˆå¤‡ä»½/è¿˜åŸä½ç½®ï¼‰

å¯é€‰åŠŸèƒ½:
  -c, --compress         å¯ç”¨å‹ç¼©
  -e, --encrypt          å¯ç”¨åŠ å¯†
  -p, --password <å¯†ç >  è®¾ç½®åŠ å¯†å¯†ç 
  -a, --metadata        è¿˜åŸå…ƒæ•°æ®

è¿‡æ»¤é€‰é¡¹:
  --type <ç±»å‹>         æŒ‰ç±»å‹è¿‡æ»¤ï¼Œå¯é€‰å€¼:
                        n (æ™®é€šæ–‡ä»¶)
                        l (ç¬¦å·é“¾æ¥)
                        p (ç®¡é“æ–‡ä»¶)
  --name <æ¨¡å¼>         æŒ‰æ–‡ä»¶åè¿‡æ»¤(æ­£åˆ™è¡¨è¾¾å¼)
  --path <æ¨¡å¼>         æŒ‰è·¯å¾„è¿‡æ»¤(æ­£åˆ™è¡¨è¾¾å¼)
  --size <è¡¨è¾¾å¼>       æŒ‰å¤§å°è¿‡æ»¤(ä¾‹å¦‚:>1k,<1m)
  --atime <æ—¶é—´èŒƒå›´>    æŒ‰è®¿é—®æ—¶é—´è¿‡æ»¤
  --mtime <æ—¶é—´èŒƒå›´>    æŒ‰ä¿®æ”¹æ—¶é—´è¿‡æ»¤
  --ctime <æ—¶é—´èŒƒå›´>    æŒ‰åˆ›å»ºæ—¶é—´è¿‡æ»¤
```

### å‘½ä»¤è¡Œæ¨¡å¼
```bash
# åŸºæœ¬æ“ä½œ
./BackupManager -b -i <è¾“å…¥è·¯å¾„> -o <è¾“å‡ºè·¯å¾„>  # å¤‡ä»½
./BackupManager -r -i <å¤‡ä»½æ–‡ä»¶> -o <è¿˜åŸè·¯å¾„>  # è¿˜åŸ
./BackupManager -l -i <å¤‡ä»½æ–‡ä»¶>                # éªŒè¯

# é«˜çº§é€‰é¡¹
-c, --compress         # å¯ç”¨å‹ç¼©
-e, --encrypt          # å¯ç”¨åŠ å¯†
-p, --password <å¯†ç >  # è®¾ç½®åŠ å¯†å¯†ç 
-a, --metadata        # è¿˜åŸå…ƒæ•°æ®
--type <n,l,p>        # æŒ‰ç±»å‹è¿‡æ»¤(n:æ™®é€šæ–‡ä»¶,l:ç¬¦å·é“¾æ¥,p:ç®¡é“æ–‡ä»¶)
--name <pattern>      # æŒ‰æ–‡ä»¶åè¿‡æ»¤(æ­£åˆ™è¡¨è¾¾å¼)
--path <pattern>      # æŒ‰è·¯å¾„è¿‡æ»¤(æ­£åˆ™è¡¨è¾¾å¼)
--size <[<>]N[bkmg]>  # æŒ‰å¤§å°è¿‡æ»¤(ä¾‹å¦‚:>1k,<1m)
```

### å›¾å½¢ç•Œé¢æ¨¡å¼
```bash
./BackupManager -g
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. åŠ å¯†å¤‡ä»½
   - è¯·å¦¥å–„ä¿ç®¡åŠ å¯†å¯†ç ï¼Œå¯†ç ä¸¢å¤±å°†æ— æ³•æ¢å¤æ•°æ®
   - ç¡®ä¿åœ¨è¿˜åŸæ—¶ä½¿ç”¨æ­£ç¡®çš„å¯†ç 

2. å¤‡ä»½æ“ä½œ
   - ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´
   - å»ºè®®åœ¨å¤‡ä»½å®Œæˆåè¿›è¡ŒéªŒè¯
   - æŸ¥çœ‹æ—¥å¿—çª—å£è·å–è¯¦ç»†çš„æ“ä½œä¿¡æ¯

3. æ–‡ä»¶è¿‡æ»¤
   - è·¯å¾„è¿‡æ»¤ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼
   - ç¡®ä¿è¿‡æ»¤è§„åˆ™æ­£ç¡®ï¼Œé¿å…é—æ¼é‡è¦æ–‡ä»¶

## ğŸ”¨ å¼€å‘ç›¸å…³

### é¡¹ç›®ç»“æ„
- `src/`: æºä»£ç æ–‡ä»¶
- `include/`: å¤´æ–‡ä»¶
- `tests/`: æµ‹è¯•æ–‡ä»¶
- `third_party/`: ç¬¬ä¸‰æ–¹åº“

ä¿®æ”¹ä»£ç åï¼Œéœ€è¦é‡æ–°ç¼–è¯‘å®‰è£…
```bash
rm -rf build && mkdir build
cd build && cmake .. && make && make install
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€å¤‡ä»½è¿˜åŸ

```bash
# å¤‡ä»½æ•´ä¸ªç›®å½•
./BackupManager -b -i ~/Documents -o ~/Backups

# è¿˜åŸå¤‡ä»½æ–‡ä»¶
./BackupManager -r -i ~/Backups/Documents.backup -o ~/Restored

# éªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
./BackupManager -l -i ~/Backups/Documents.backup
```

### æ–‡ä»¶è¿‡æ»¤ç¤ºä¾‹

```bash
# åªå¤‡ä»½.txtå’Œ.docæ–‡ä»¶
./BackupManager -b -i ~/Documents -o ~/Backups --name ".*\.(txt|doc)$"

# å¤‡ä»½å¤§äº1MBçš„æ–‡ä»¶
./BackupManager -b -i ~/Documents -o ~/Backups --size ">1m"

# å¤‡ä»½ç‰¹å®šç›®å½•ä¸‹çš„æ–‡ä»¶
./BackupManager -b -i ~/Documents -o ~/Backups --path "^projects/.*"

# åªå¤‡ä»½æ™®é€šæ–‡ä»¶å’Œç¬¦å·é“¾æ¥
./BackupManager -b -i ~/Documents -o ~/Backups --type nl
```

### å‹ç¼©å’ŒåŠ å¯†

```bash
# å¯ç”¨å‹ç¼©çš„å¤‡ä»½
./BackupManager -b -i ~/Documents -o ~/Backups -c

# å¯ç”¨åŠ å¯†çš„å¤‡ä»½
./BackupManager -b -i ~/Documents -o ~/Backups -e -p mypassword

# å‹ç¼©å¹¶åŠ å¯†å¤‡ä»½
./BackupManager -b -i ~/Documents -o ~/Backups -c -e -p mypassword

# è¿˜åŸåŠ å¯†çš„å¤‡ä»½
./BackupManager -r -i ~/Backups/Documents.backup -o ~/Restored -p mypassword
```

### æŒ‰æ—¶é—´è¿‡æ»¤

```bash
# å¤‡ä»½ç‰¹å®šæ—¶é—´æ®µå†…è®¿é—®çš„æ–‡ä»¶
./BackupManager -b -i ~/Documents -o ~/Backups --atime "202403010000,202403312359"
```

### å…ƒæ•°æ®å¤„ç†

```bash
# å¤‡ä»½æ—¶ä¿å­˜å…ƒæ•°æ®
./BackupManager -b -i ~/Documents -o ~/Backups -a

# è¿˜åŸæ—¶æ¢å¤å…ƒæ•°æ®
./BackupManager -r -i ~/Backups/Documents.backup -o ~/Restored -a
```

### å›¾å½¢ç•Œé¢æ“ä½œ

1. å¯åŠ¨å›¾å½¢ç•Œé¢ï¼š
```bash
./BackupManager -g
```

2. åœ¨ç•Œé¢ä¸­ï¼š
   - é€‰æ‹©æºæ–‡ä»¶/ç›®å½•å’Œç›®æ ‡è·¯å¾„
   - é…ç½®è¿‡æ»¤é€‰é¡¹
   - é€‰æ‹©æ˜¯å¦å¯ç”¨å‹ç¼©å’ŒåŠ å¯†
   - ç‚¹å‡»"å¤‡ä»½"/"è¿˜åŸ"/"éªŒè¯"æŒ‰é’®æ‰§è¡Œæ“ä½œ
   - æŸ¥çœ‹å®æ—¶æ—¥å¿—è¾“å‡º




